<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BD Clan Clicker Minigame</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #111827, #1f2937);
    }
    .health-bar {
      height: 20px;
      background-color: #4b5563;
      border-radius: 10px;
      overflow: hidden;
    }
    .health-fill {
      height: 100%;
      background-color: #10b981;
      transition: width 0.3s ease;
    }
    .btn {
      @apply bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded;
    }
  </style>
</head>
<body class="text-white min-h-screen p-4">
  <!-- Navigation Menu -->
  <nav class="bg-gray-900 p-4 fixed top-0 w-full z-50 shadow-md">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="text-xl font-bold text-green-400">BD Clan Minigame</div>
      <select id="killer-select" class="bg-gray-800 text-white p-2 rounded">
        <option value="Zen">Zen</option>
        <option value="Kyle">Kyle</option>
        <option value="Levi">Levi</option>
        <option value="Ban">Ban</option>
      </select>
    </div>
  </nav>

  <div class="mt-24 grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
    <!-- Target Sections -->
    <div id="targets" class="space-y-6">
      <!-- Each target -->
      <div class="bg-gray-800 p-4 rounded shadow" id="target-Zen">
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-xl font-bold">Zen</h2>
          <button onclick="attack('Zen')" class="btn">Attack</button>
        </div>
        <div class="health-bar">
          <div class="health-fill" id="zen-health"></div>
        </div>
        <div class="text-sm mt-1" id="zen-health-text">100</div>
      </div>
      <div class="bg-gray-800 p-4 rounded shadow" id="target-Kyle">
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-xl font-bold">Kyle</h2>
          <button onclick="attack('Kyle')" class="btn">Attack</button>
        </div>
        <div class="health-bar">
          <div class="health-fill" id="kyle-health"></div>
        </div>
        <div class="text-sm mt-1" id="kyle-health-text">100</div>
      </div>
      <div class="bg-gray-800 p-4 rounded shadow" id="target-Levi">
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-xl font-bold">Levi</h2>
          <button onclick="attack('Levi')" class="btn">Attack</button>
        </div>
        <div class="health-bar">
          <div class="health-fill" id="levi-health"></div>
        </div>
        <div class="text-sm mt-1" id="levi-health-text">100</div>
      </div>
      <div class="bg-gray-800 p-4 rounded shadow" id="target-Ban">
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-xl font-bold">Ban</h2>
          <button onclick="attack('Ban')" class="btn">Attack</button>
        </div>
        <div class="health-bar">
          <div class="health-fill" id="ban-health"></div>
        </div>
        <div class="text-sm mt-1" id="ban-health-text">100</div>
      </div>
    </div>
      
    <div id="admin-panel" class="p-4 bg-gray-800 rounded-lg mb-4">
  <h2 class="text-xl font-bold mb-2 text-white">Admin Panel</h2>
  <input id="new-target-name" type="text" placeholder="Enter name"
    class="p-2 rounded mr-2 text-black" />
  <button id="add-target-btn"
    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
    Add Target
  </button>
</div>

    <!-- Stats and Kill Log -->
    <div class="bg-gray-900 p-6 rounded shadow space-y-4">
      <h2 class="text-2xl font-bold text-green-400">Kill Stats</h2>
      <div>Total Kills: <span id="total-kills">0</span></div>
      <div>Zen Kills: <span id="zen-kills">0</span></div>
      <div>Kyle Kills: <span id="kyle-kills">0</span></div>
      <div>Levi Kills: <span id="levi-kills">0</span></div>
      <div>Ban Kills: <span id="ban-kills">0</span></div>
      <table class="w-full text-sm mt-4">
        <thead>
          <tr>
            <th class="text-left">Killer</th>
            <th class="text-left">Victim</th>
            <th class="text-left">Count</th>
          </tr>
        </thead>
        <tbody id="kill-details"></tbody>
      </table>
      <div class="flex gap-2 mt-4">
        <button onclick="resetStats()" class="btn bg-red-600 hover:bg-red-700">Reset Stats</button>
        <button onclick="exportStats()" class="btn bg-green-600 hover:bg-green-700">Export Stats</button>
      </div>
    </div>
  </div>

  <script>
    const firebaseConfig = {
    apiKey: "AIzaSyBDgadn_l0VLJmgCPzziGbwbXYaIfhn0vQ",
    authDomain: "aoh-bd-clan.firebaseapp.com",
    databaseURL: "https://aoh-bd-clan-default-rtdb.firebaseio.com/",
    projectId: "aoh-bd-clan",
    storageBucket: "aoh-bd-clan.firebasestorage.app",
    messagingSenderId: "824398865971",
    appId: "1:824398865971:web:139890878f47e251ad6546",
    measurementId: "G-4V15NCH2RH"
    };
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    const gameState = {
      currentKiller: "Zen",
      targets: {
        Zen: { health: 100, maxHealth: 100 },
        Kyle: { health: 100, maxHealth: 100 },
        Levi: { health: 100, maxHealth: 100 },
        Ban: { health: 100, maxHealth: 100 },
      },
      stats: {
        totalKills: 0,
        zenKills: 0,
        kyleKills: 0,
        leviKills: 0,
        banKills: 0,
        killDetails: {}
      }
    };

    document.getElementById('killer-select').addEventListener('change', (e) => {
      gameState.currentKiller = e.target.value;
    });

    function attack(targetName) {
      const target = gameState.targets[targetName];
      if (!target) return;
      target.health -= 10;
      if (target.health <= 0) {
        target.health = target.maxHealth;
        gameState.stats.totalKills++;
        gameState.stats[`${targetName.toLowerCase()}Kills`]++;
        const killer = gameState.currentKiller;
        const key = `${killer}-${targetName}`;
        gameState.stats.killDetails[key] = (gameState.stats.killDetails[key] || 0) + 1;
        saveStats();
        renderKillDetails();
      }
      updateHealthBar(targetName);
      updateStatsUI();
    }

    function updateHealthBar(targetName) {
      const target = gameState.targets[targetName];
      const percent = (target.health / target.maxHealth) * 100;
      document.getElementById(`${targetName.toLowerCase()}-health`).style.width = `${percent}%`;
      document.getElementById(`${targetName.toLowerCase()}-health-text`).textContent = target.health;
    }

    function updateStatsUI() {
      document.getElementById('total-kills').textContent = gameState.stats.totalKills;
      document.getElementById('zen-kills').textContent = gameState.stats.zenKills;
      document.getElementById('kyle-kills').textContent = gameState.stats.kyleKills;
      document.getElementById('levi-kills').textContent = gameState.stats.leviKills;
      document.getElementById('ban-kills').textContent = gameState.stats.banKills;
    }

    function renderKillDetails() {
      const tbody = document.getElementById('kill-details');
      tbody.innerHTML = '';
      for (const [key, count] of Object.entries(gameState.stats.killDetails)) {
        const [killer, victim] = key.split('-');
        const row = `<tr><td>${killer}</td><td>${victim}</td><td>${count}</td></tr>`;
        tbody.innerHTML += row;
      }
    }

    function saveStats() {
      database.ref("minigameStats").set(gameState.stats);
    }

    function loadStats(callback) {
      database.ref("minigameStats").once("value").then(snapshot => {
        callback(snapshot.val());
      }).catch(err => {
        console.error("Failed to load stats", err);
        callback(null);
      });
    }

    function resetStats() {
      if (confirm("Reset all stats?")) {
        gameState.stats = {
          totalKills: 0,
          zenKills: 0,
          kyleKills: 0,
          leviKills: 0,
          banKills: 0,
          killDetails: {}
        };
        updateStatsUI();
        renderKillDetails();
        saveStats();
      }
    }

    function exportStats() {
      const data = JSON.stringify(gameState.stats, null, 2);
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "bd_clan_stats.json";
      a.click();
      URL.revokeObjectURL(url);
    }

    function initGame() {
      loadStats((loadedStats) => {
        if (loadedStats) gameState.stats = loadedStats;
        updateStatsUI();
        renderKillDetails();
      });
    }

    document.addEventListener("DOMContentLoaded", initGame);
  </script>
</body>
</html>
