<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BD Clan Clicker Minigame</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #111;
            color: #eee;
        }
        .button {
            margin: 10px;
            padding: 10px 20px;
            background: #444;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        .button:hover {
            background: #666;
        }
        .target, .killer {
            margin: 20px;
            padding: 10px;
            display: inline-block;
            border: 2px solid #ccc;
            border-radius: 10px;
            background: #222;
        }
        .death-animation {
            animation: fadeOut 1s forwards;
        }
        .respawn-animation {
            animation: fadeIn 0.5s forwards;
        }
        @keyframes fadeOut {
            to { opacity: 0; transform: scale(0.5); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>
    <h1>BD Clan Clicker Minigame</h1>
    
    <div>
        <button class="button" onclick="setKiller('Zen')">Select Zen</button>
        <button class="button" onclick="setKiller('Kyle')">Select Kyle</button>
        <button class="button" onclick="setKiller('Levi')">Select Levi</button>
        <button class="button" onclick="setKiller('Ban')">Select Ban</button>
    </div>

    <h2>Current Killer: <span id="current-killer">None</span></h2>

    <div id="targets">
        <div class="target" id="zen-target">
            <h3>Zen</h3>
            <p>Health: <span id="zen-health">100</span></p>
            <button class="button" onclick="attack('Zen')">Attack Zen</button>
        </div>
        <div class="target" id="kyle-target">
            <h3>Kyle</h3>
            <p>Health: <span id="kyle-health">100</span></p>
            <button class="button" onclick="attack('Kyle')">Attack Kyle</button>
        </div>
        <div class="target" id="levi-target">
            <h3>Levi</h3>
            <p>Health: <span id="levi-health">100</span></p>
            <button class="button" onclick="attack('Levi')">Attack Levi</button>
        </div>
        <div class="target" id="ban-target">
            <h3>Ban</h3>
            <p>Health: <span id="ban-health">100</span></p>
            <button class="button" onclick="attack('Ban')">Attack Ban</button>
        </div>
    </div>

    <h2>Stats</h2>
    <p>Total Kills: <span id="total-kills">0</span></p>
    <p>Zen Kills: <span id="zen-kills">0</span></p>
    <p>Kyle Kills: <span id="kyle-kills">0</span></p>
    <p>Levi Kills: <span id="levi-kills">0</span></p>
    <p>Ban Kills: <span id="ban-kills">0</span></p>

    <h3>Detailed Kill Stats</h3>
    <ul id="kill-details"></ul>

    <div>
        <button class="button" onclick="saveStats()">Save Stats</button>
        <button class="button" onclick="loadStats()">Load Stats</button>
        <button class="button" onclick="resetStats()">Reset Stats</button>
        <button class="button" onclick="exportStats()">Export Stats</button>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <script>
        // Initialize Firebase (REPLACE with your credentials)
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);

        const db = firebase.database();

        const gameState = {
            currentKiller: null,
            targets: {
                Zen: { health: 100, maxHealth: 100 },
                Kyle: { health: 100, maxHealth: 100 },
                Levi: { health: 100, maxHealth: 100 },
                Ban: { health: 100, maxHealth: 100 }
            },
            stats: {
                totalKills: 0,
                zenKills: 0,
                kyleKills: 0,
                leviKills: 0,
                banKills: 0,
                killDetails: {}
            }
        };

        function initGame() {
            updateStatsUI();
        }

        function setKiller(name) {
            gameState.currentKiller = name;
            document.getElementById("current-killer").textContent = name;
        }

        function attack(targetName) {
            if (!gameState.currentKiller) {
                alert("Please select a killer first!");
                return;
            }

            const target = gameState.targets[targetName];
            target.health -= 10;

            updateTargetUI(targetName);

            if (target.health <= 0) {
                killTarget(targetName);
            }
        }

        function killTarget(targetName) {
            const targetElement = document.getElementById(`${targetName.toLowerCase()}-target`);
            targetElement.classList.add('death-animation');

            const killer = gameState.currentKiller;
            const key = `${killer}-${targetName}`;
            gameState.stats.killDetails[key] = (gameState.stats.killDetails[key] || 0) + 1;

            gameState.stats.totalKills++;
            const lower = targetName.toLowerCase();
            gameState.stats[`${lower}Kills`]++;

            updateStatsUI();
            renderKillDetails();
            saveStats();

            setTimeout(() => {
                targetElement.classList.remove('death-animation');
                targetElement.classList.add('respawn-animation');
                setTimeout(() => {
                    targetElement.classList.remove('respawn-animation');
                }, 500);

                gameState.targets[targetName].health = gameState.targets[targetName].maxHealth;
                updateTargetUI(targetName);
            }, 1000);
        }

        function updateTargetUI(targetName) {
            const healthEl = document.getElementById(`${targetName.toLowerCase()}-health`);
            healthEl.textContent = gameState.targets[targetName].health;
        }

        function updateStatsUI() {
            document.getElementById("total-kills").textContent = gameState.stats.totalKills;
            document.getElementById("zen-kills").textContent = gameState.stats.zenKills;
            document.getElementById("kyle-kills").textContent = gameState.stats.kyleKills;
            document.getElementById("levi-kills").textContent = gameState.stats.leviKills;
            document.getElementById("ban-kills").textContent = gameState.stats.banKills;
        }

        function renderKillDetails() {
            const list = document.getElementById("kill-details");
            list.innerHTML = '';
            for (const [key, value] of Object.entries(gameState.stats.killDetails)) {
                const li = document.createElement("li");
                li.textContent = `${key}: ${value}`;
                list.appendChild(li);
            }
        }

        function saveStats() {
            db.ref('bdClanGame/stats').set(gameState.stats);
        }

        function loadStats() {
            db.ref('bdClanGame/stats').once('value').then(snapshot => {
                if (snapshot.exists()) {
                    gameState.stats = snapshot.val();
                    updateStatsUI();
                    renderKillDetails();
                }
            });
        }

        function resetStats() {
            gameState.stats = {
                totalKills: 0,
                zenKills: 0,
                kyleKills: 0,
                leviKills: 0,
                banKills: 0,
                killDetails: {}
            };
            saveStats();
            updateStatsUI();
            renderKillDetails();
        }

        function exportStats() {
            const blob = new Blob([JSON.stringify(gameState.stats, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'bd_clan_stats.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        window.onload = initGame;
    </script>
</body>
</html>
